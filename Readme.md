# Own-IDE API

A fast, secure, containerized code execution engine built with **FastAPI**, **Docker**, and **Redis**.

Own-IDE lets users run code in multiple languages (Python, C++, Java, JavaScript) inside isolated Docker containers. Every execution is sandboxed, resource-limited, and tracked — making it safe enough to expose as an API and fast enough for real usage.

Think of it as the backend engine for an online IDE or judge system.

---

## What It Does

* **Run code in multiple languages**
  Supports Python, C++, Java, and JavaScript.

* **Safe sandboxing with Docker**
  Every execution runs in a fresh container with CPU and memory limits.

* **Fast rate limiting with Redis**
  Guest users are rate-limited with sub-millisecond checks.

* **Tiered access model**

  * **Guests:** 5 requests per day (tracked using cookies + IP).
  * **Authenticated users:** Unlimited access via JWT.

* **Non-blocking execution**
  Code runs asynchronously in background tasks.

* **Execution history**
  All submissions and outputs are stored in MongoDB except the ones generated by guest users.

---

## Tech Stack

* **API:** FastAPI
* **Containers:** Docker Engine API
* **Database:** MongoDB
* **Cache / Rate Limiting:** Redis

---

## Project Structure

```text
├── apis/
│   ├── v1/
│   │   ├── route_login.py    # Handles exposed token for authorization
│   │   ├── route_sandbox.py  # Handles code execution requests
│   │   └── route_user.py     # Handles register
│   ├── __init__.py
│   └── base.py               # Accumulates all the routers in one place
├── core/
│   ├── config.py             # Environment settings
│   ├── hashing.py            # Handles hashing of passwords
│   └── security.py           # Handles creation of access token
├── db/
│   ├── db_session.py         # Async MongoDB setup
│   ├── redis_session.py      # Async Redis setup  
│   ├── sandbox.py            # Docker execution logic + DB helpers
│   └── user.py               # Auth dependencies
├── schemas/
│   ├── code.py               # Pydantic models related to code submission  
│   ├── token.py              # Pydantic models for Auth Tokens
│   └── user.py               # Pydantic models for user
└── main.py                   # App entry point
```

---

## Setup

### Prerequisites

Make sure you have:

* Docker installed and running
* Python 3.10+
* MongoDB (local or cloud)
* Redis (local or cloud)

---

### Environment Variables

Create a `.env` file in the project root:

```env
DATABASE_URI="your_mongoDB_uri"
DATABASE_USER="your_mongoDB_username"
DATABASE_PASSWORD="your_mongoDB_password"
SUMBISSION_TTL_SECONDS=86400

SECRET_KEY="your_custom_secret_key"
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

REDIS_URL="your_redis_url"
GUEST_QUOTA=5
IP_EXPIRY_SECONDS=86400  # 1 day in seconds
```

---

### Run Locally

```bash
pip install -r requirements.txt
fastapi dev main.py
```

Server will start at:

```
http://127.0.0.1:8000
```
